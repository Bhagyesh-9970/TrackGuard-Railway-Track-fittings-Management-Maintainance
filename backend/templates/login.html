<!DOCTYPE html>
<html>
<head>
<title>Login â€“ Railway QR System</title>
<style>
body { background:#e9eef5; display:flex; justify-content:center; align-items:center; height:100vh; font-family:Segoe UI; }
form { background:white; padding:30px; border-radius:10px; width:350px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
input { width:100%; padding:12px; margin:10px 0; border-radius:8px; border:1px solid #ccc; }
button { width:100%; padding:12px; background:#0d47a1; border:none; border-radius:8px; color:white; font-size:16px; cursor:pointer; }
button:hover { background:#002171; }
h2 { text-align:center; }
</style>
</head>

<body>
<form id="loginForm">
  <h2>Login</h2>
  <input type="email" id="email" placeholder="Email" required>
  <input type="password" id="password" placeholder="Password" required>
  <button type="submit">Login</button>
</form>

<script>
document.getElementById("loginForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const res = await fetch("/api/auth/login", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            email: email.value,
            password: password.value
        })
    });

    const data = await res.json();

    if (res.status !== 200) {
        alert(data.error || "Login failed");
        return;
    }

    // Redirect based on role
    if (data.role === "admin") {
        window.location.href = "/admin";
    }
    else if (data.role === "inspector") {
        window.location.href = "/dashboard";
    }
    else {
        window.location.href = "/scan";  // For other roles
    }
});
</script>
</body>
</html>
 
